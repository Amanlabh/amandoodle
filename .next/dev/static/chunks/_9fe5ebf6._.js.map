{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/aman/Downloads/amandoodle/lib/supabase.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js'\n\nconst supabaseUrl = 'https://nuwkxsreqhfvvcxcopsm.supabase.co'\nconst supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im51d2t4c3JlcWhmdnZjeGNvcHNtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ1NzMwNDMsImV4cCI6MjA4MDE0OTA0M30._jjVuEpzVhiMwVxnI_cZq6mrYsOC-7VjnDzfJo4IF1s'\n\nexport const supabase = createClient(supabaseUrl, supabaseKey)\n\n// Simple email authentication function\nexport const signInWithEmail = async (email: string) => {\n  const { data, error } = await supabase.auth.signInWithOtp({\n    email: email,\n    options: {\n      emailRedirectTo: window.location.origin,\n    },\n  })\n  return { data, error }\n}\n\n// Get current user\nexport const getCurrentUser = async () => {\n  const { data: { user } } = await supabase.auth.getUser()\n  return user\n}\n"],"names":[],"mappings":";;;;;;;;AAAA;;AAEA,MAAM,cAAc;AACpB,MAAM,cAAc;AAEb,MAAM,WAAW,IAAA,0MAAY,EAAC,aAAa;AAG3C,MAAM,kBAAkB,OAAO;IACpC,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,aAAa,CAAC;QACxD,OAAO;QACP,SAAS;YACP,iBAAiB,OAAO,QAAQ,CAAC,MAAM;QACzC;IACF;IACA,OAAO;QAAE;QAAM;IAAM;AACvB;AAGO,MAAM,iBAAiB;IAC5B,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IACtD,OAAO;AACT"}},
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///Users/aman/Downloads/amandoodle/components/chat-container.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect, useRef } from 'react'\nimport { supabase } from '@/lib/supabase'\nimport { MessageCircle, Send, User, LogOut, Users, MessageSquare } from 'lucide-react'\n\ninterface ChatRoom {\n  id: string\n  user_email: string\n  user_name: string\n  user_avatar_url?: string\n  created_at: string\n  updated_at: string\n  last_message_at: string\n  is_active: boolean\n}\n\ninterface ChatMessage {\n  id: string\n  room_id: string\n  sender_email: string\n  sender_name: string\n  message: string\n  is_admin: boolean\n  created_at: string\n}\n\ninterface User {\n  id: string\n  email?: string\n  user_metadata?: {\n    name?: string\n    avatar_url?: string\n  }\n}\n\nexport default function ChatContainer() {\n  const [user, setUser] = useState<User | null>(null)\n  const [chatRooms, setChatRooms] = useState<ChatRoom[]>([])\n  const [selectedRoom, setSelectedRoom] = useState<ChatRoom | null>(null)\n  const [messages, setMessages] = useState<ChatMessage[]>([])\n  const [newMessage, setNewMessage] = useState('')\n  const [isLoading, setIsLoading] = useState(true)\n  const [isSigningIn, setIsSigningIn] = useState(false)\n  const messagesEndRef = useRef<HTMLDivElement>(null)\n  const adminEmail = 'amanlabh4@gmail.com'\n\n  useEffect(() => {\n    checkAuth()\n  }, [])\n\n  useEffect(() => {\n    if (user) {\n      fetchChatRooms()\n      setupRealtimeSubscriptions()\n    }\n  }, [user])\n\n  useEffect(() => {\n    scrollToBottom()\n  }, [messages])\n\n  const checkAuth = async () => {\n    try {\n      const { data: { user } } = await supabase.auth.getUser()\n      if (user) {\n        setUser(user)\n      }\n    } catch (error) {\n      console.error('Error checking auth:', error)\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  const signInWithGoogle = async () => {\n    setIsSigningIn(true)\n    try {\n      const { error } = await supabase.auth.signInWithOAuth({\n        provider: 'google',\n        options: {\n          redirectTo: `${window.location.origin}/chat`\n        }\n      })\n      if (error) throw error\n    } catch (error) {\n      console.error('Error signing in with Google:', error)\n    } finally {\n      setIsSigningIn(false)\n    }\n  }\n\n  const signOut = async () => {\n    await supabase.auth.signOut()\n    setUser(null)\n    setChatRooms([])\n    setSelectedRoom(null)\n    setMessages([])\n  }\n\n  const fetchChatRooms = async () => {\n    if (!user?.email) return\n\n    try {\n      const { data, error } = await supabase\n        .from('chat_rooms')\n        .select('*')\n        .order('last_message_at', { ascending: false })\n\n      if (error) throw error\n      setChatRooms(data || [])\n      \n      // Auto-select first room for users, or show all rooms for admin\n      if (data && data.length > 0) {\n        if (user.email === adminEmail) {\n          // Admin sees all rooms but doesn't auto-select\n        } else {\n          // Regular user selects their own room\n          const userRoom = data.find(room => room.user_email === user.email)\n          if (userRoom) {\n            setSelectedRoom(userRoom)\n            fetchMessages(userRoom.id)\n          } else {\n            // Create new room for user\n            createChatRoom()\n          }\n        }\n      } else if (user.email !== adminEmail) {\n        // Create new room for regular user\n        createChatRoom()\n      }\n    } catch (error) {\n      console.error('Error fetching chat rooms:', error)\n    }\n  }\n\n  const createChatRoom = async () => {\n    if (!user?.email) return\n\n    try {\n      const { data, error } = await supabase\n        .from('chat_rooms')\n        .insert([{\n          user_email: user.email,\n          user_name: user.user_metadata?.name || user.email,\n          user_avatar_url: user.user_metadata?.avatar_url\n        }])\n        .select()\n\n      if (error) throw error\n      if (data && data[0]) {\n        setSelectedRoom(data[0])\n        setChatRooms(prev => [data[0], ...prev])\n      }\n    } catch (error) {\n      console.error('Error creating chat room:', error)\n    }\n  }\n\n  const fetchMessages = async (roomId: string) => {\n    try {\n      const { data, error } = await supabase\n        .from('chat_messages')\n        .select('*')\n        .eq('room_id', roomId)\n        .order('created_at', { ascending: true })\n\n      if (error) throw error\n      setMessages(data || [])\n    } catch (error) {\n      console.error('Error fetching messages:', error)\n    }\n  }\n\n  const setupRealtimeSubscriptions = () => {\n    // Subscribe to chat rooms\n    const roomsSubscription = supabase\n      .channel('chat_rooms_changes')\n      .on('postgres_changes', \n        { event: '*', schema: 'public', table: 'chat_rooms' },\n        (payload) => {\n          if (payload.eventType === 'INSERT') {\n            setChatRooms(prev => [payload.new as ChatRoom, ...prev])\n          } else if (payload.eventType === 'UPDATE') {\n            setChatRooms(prev => prev.map(room => \n              room.id === payload.new.id ? payload.new as ChatRoom : room\n            ))\n          }\n        }\n      )\n      .subscribe()\n\n    // Subscribe to messages\n    const messagesSubscription = supabase\n      .channel('chat_messages_changes')\n      .on('postgres_changes',\n        { event: 'INSERT', schema: 'public', table: 'chat_messages' },\n        (payload) => {\n          const newMessage = payload.new as ChatMessage\n          if (selectedRoom && newMessage.room_id === selectedRoom.id) {\n            setMessages(prev => [...prev, newMessage])\n          }\n        }\n      )\n      .subscribe()\n\n    return () => {\n      roomsSubscription.unsubscribe()\n      messagesSubscription.unsubscribe()\n    }\n  }\n\n  const sendMessage = async (e: React.FormEvent) => {\n    e.preventDefault()\n    if (!newMessage.trim() || !selectedRoom || !user?.email) return\n\n    const messageData = {\n      room_id: selectedRoom.id,\n      sender_email: user.email,\n      sender_name: user.user_metadata?.name || user.email,\n      message: newMessage.trim(),\n      is_admin: user.email === adminEmail\n    }\n\n    try {\n      const { error } = await supabase\n        .from('chat_messages')\n        .insert([messageData])\n\n      if (error) throw error\n\n      // Update room's last message time\n      await supabase\n        .from('chat_rooms')\n        .update({ last_message_at: new Date().toISOString() })\n        .eq('id', selectedRoom.id)\n\n      setNewMessage('')\n    } catch (error) {\n      console.error('Error sending message:', error)\n    }\n  }\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' })\n  }\n\n  const selectRoom = (room: ChatRoom) => {\n    setSelectedRoom(room)\n    fetchMessages(room.id)\n  }\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-96\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\"></div>\n      </div>\n    )\n  }\n\n  if (!user) {\n    return (\n      <div className=\"max-w-md mx-auto\">\n        <div className=\"text-center py-8 bg-card border border-border rounded-lg\">\n          <div className=\"mb-6\">\n            <MessageCircle size={48} className=\"mx-auto mb-4 opacity-50\" />\n            <h3 className=\"text-lg font-medium mb-2\">Drop a message to me !</h3>\n            <p className=\"text-muted-foreground mb-4\">sign in to Drop me a message</p>\n          </div>\n          \n          <button\n            onClick={signInWithGoogle}\n            disabled={isSigningIn}\n            className=\"w-full px-4 py-2 bg-primary text-primary-foreground rounded-md text-sm font-medium hover:bg-primary/90 disabled:opacity-50 transition-colors flex items-center justify-center gap-2 mb-4\"\n          >\n            {isSigningIn ? (\n              <div className=\"w-4 h-4 border-2 border-primary-foreground border-t-transparent rounded-full animate-spin\"></div>\n            ) : (\n              <svg className=\"w-4 h-4\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                <path d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\" fill=\"#4285F4\"/>\n                <path d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\" fill=\"#34A853\"/>\n                <path d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\" fill=\"#FBBC05\"/>\n                <path d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\" fill=\"#EA4335\"/>\n              </svg>\n            )}\n            Continue with Google\n          </button>\n          \n          <button\n            onClick={() => window.location.href = '/'}\n            className=\"w-full px-4 py-2 bg-gray-100 text-gray-700 rounded-md text-sm font-mono hover:bg-gray-200 transition-colors\"\n          >\n            ~/aman-kumar\n          </button>\n        </div>\n      </div>\n    )\n  }\n\n  const isAdmin = user?.email === adminEmail\n\n  return (\n    <div className=\"max-w-4xl mx-auto\">\n      <div className=\"flex h-[600px] border border-border rounded-lg overflow-hidden bg-card\">\n      {/* Chat Rooms Sidebar - Admin Only */}\n      {isAdmin && (\n        <div className=\"w-80 border-r border-border bg-background\">\n          <div className=\"p-4 border-b border-border\">\n            <div className=\"flex items-center justify-between\">\n              <h3 className=\"font-semibold text-foreground\">Conversations</h3>\n              <button\n                onClick={signOut}\n                className=\"p-1 text-muted-foreground hover:text-foreground transition-colors\"\n                title=\"Sign out\"\n              >\n                <LogOut size={16} />\n              </button>\n            </div>\n          </div>\n          <div className=\"overflow-y-auto h-full\">\n            {chatRooms.length === 0 ? (\n              <div className=\"text-center py-8 text-muted-foreground\">\n                <Users size={48} className=\"mx-auto mb-4 opacity-50\" />\n                <p>No conversations yet</p>\n              </div>\n            ) : (\n              <div className=\"divide-y divide-border\">\n                {chatRooms.map((room) => (\n                  <div\n                    key={room.id}\n                    onClick={() => selectRoom(room)}\n                    className={`p-4 cursor-pointer hover:bg-muted transition-colors ${\n                      selectedRoom?.id === room.id ? 'bg-muted' : ''\n                    }`}\n                  >\n                    <div className=\"flex items-center gap-3\">\n                      <div className=\"w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center\">\n                        <User size={20} className=\"text-primary\" />\n                      </div>\n                      <div className=\"flex-1 min-w-0\">\n                        <h4 className=\"font-medium text-foreground truncate\">{room.user_name}</h4>\n                        <p className=\"text-sm text-muted-foreground truncate\">{room.user_email}</p>\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n\n      {/* Chat Messages */}\n      <div className=\"flex-1 flex flex-col\">\n        {selectedRoom ? (\n          <>\n            {/* Chat Header */}\n            <div className=\"p-4 border-b border-border bg-background\">\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center\">\n                    <User size={16} className=\"text-primary\" />\n                  </div>\n                  <div>\n                    <h3 className=\"font-semibold text-foreground\">\n                      {isAdmin ? selectedRoom.user_name : 'Chat with Aman'}\n                    </h3>\n                    <p className=\"text-sm text-muted-foreground\">\n                      {isAdmin ? selectedRoom.user_email : 'Online'}\n                    </p>\n                  </div>\n                </div>\n                {!isAdmin && (\n                  <button\n                    onClick={signOut}\n                    className=\"p-1 text-muted-foreground hover:text-foreground transition-colors\"\n                    title=\"Sign out\"\n                  >\n                    <LogOut size={16} />\n                  </button>\n                )}\n              </div>\n            </div>\n\n            {/* Messages */}\n            <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\n              {messages.length === 0 ? (\n                <div className=\"text-center py-8 text-muted-foreground\">\n                  <MessageSquare size={48} className=\"mx-auto mb-4 opacity-50\" />\n                  <p>No messages yet. Start the conversation!</p>\n                </div>\n              ) : (\n                messages.map((message) => (\n                  <div\n                    key={message.id}\n                    className={`flex ${message.is_admin === isAdmin ? 'justify-end' : 'justify-start'}`}\n                  >\n                    <div\n                      className={`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${\n                        message.is_admin === isAdmin\n                          ? 'bg-primary text-primary-foreground'\n                          : 'bg-muted text-foreground'\n                      }`}\n                    >\n                      <p className=\"text-sm\">{message.message}</p>\n                      <p className={`text-xs mt-1 ${\n                        message.is_admin === isAdmin ? 'text-primary-foreground/70' : 'text-muted-foreground'\n                      }`}>\n                        {new Date(message.created_at).toLocaleTimeString()}\n                      </p>\n                    </div>\n                  </div>\n                ))\n              )}\n              <div ref={messagesEndRef} />\n            </div>\n\n            {/* Message Input */}\n            <div className=\"p-4 border-t border-border bg-background\">\n              <form onSubmit={sendMessage} className=\"flex gap-2\">\n                <input\n                  type=\"text\"\n                  value={newMessage}\n                  onChange={(e) => setNewMessage(e.target.value)}\n                  placeholder=\"Type your message...\"\n                  className=\"flex-1 px-3 py-2 bg-background border border-border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-transparent\"\n                />\n                <button\n                  type=\"submit\"\n                  disabled={!newMessage.trim()}\n                  className=\"p-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n                >\n                  <Send size={16} />\n                </button>\n              </form>\n            </div>\n          </>\n        ) : (\n          <div className=\"flex-1 flex items-center justify-center\">\n            <div className=\"text-center text-muted-foreground\">\n              <Users size={48} className=\"mx-auto mb-4 opacity-50\" />\n              <p>Select a conversation to start chatting</p>\n            </div>\n          </div>\n        )}\n      </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;;;AAJA;;;;AAoCe,SAAS;;IACtB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAc;IAC9C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAa,EAAE;IACzD,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAkB;IAClE,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAgB,EAAE;IAC1D,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAC;IAC7C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAC3C,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAC;IAC/C,MAAM,iBAAiB,IAAA,uKAAM,EAAiB;IAC9C,MAAM,aAAa;IAEnB,IAAA,0KAAS;mCAAC;YACR;QACF;kCAAG,EAAE;IAEL,IAAA,0KAAS;mCAAC;YACR,IAAI,MAAM;gBACR;gBACA;YACF;QACF;kCAAG;QAAC;KAAK;IAET,IAAA,0KAAS;mCAAC;YACR;QACF;kCAAG;QAAC;KAAS;IAEb,MAAM,YAAY;QAChB,IAAI;YACF,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,8HAAQ,CAAC,IAAI,CAAC,OAAO;YACtD,IAAI,MAAM;gBACR,QAAQ;YACV;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,wBAAwB;QACxC,SAAU;YACR,aAAa;QACf;IACF;IAEA,MAAM,mBAAmB;QACvB,eAAe;QACf,IAAI;YACF,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,8HAAQ,CAAC,IAAI,CAAC,eAAe,CAAC;gBACpD,UAAU;gBACV,SAAS;oBACP,YAAY,GAAG,OAAO,QAAQ,CAAC,MAAM,CAAC,KAAK,CAAC;gBAC9C;YACF;YACA,IAAI,OAAO,MAAM;QACnB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,iCAAiC;QACjD,SAAU;YACR,eAAe;QACjB;IACF;IAEA,MAAM,UAAU;QACd,MAAM,8HAAQ,CAAC,IAAI,CAAC,OAAO;QAC3B,QAAQ;QACR,aAAa,EAAE;QACf,gBAAgB;QAChB,YAAY,EAAE;IAChB;IAEA,MAAM,iBAAiB;QACrB,IAAI,CAAC,MAAM,OAAO;QAElB,IAAI;YACF,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,8HAAQ,CACnC,IAAI,CAAC,cACL,MAAM,CAAC,KACP,KAAK,CAAC,mBAAmB;gBAAE,WAAW;YAAM;YAE/C,IAAI,OAAO,MAAM;YACjB,aAAa,QAAQ,EAAE;YAEvB,gEAAgE;YAChE,IAAI,QAAQ,KAAK,MAAM,GAAG,GAAG;gBAC3B,IAAI,KAAK,KAAK,KAAK,YAAY;gBAC7B,+CAA+C;gBACjD,OAAO;oBACL,sCAAsC;oBACtC,MAAM,WAAW,KAAK,IAAI,CAAC,CAAA,OAAQ,KAAK,UAAU,KAAK,KAAK,KAAK;oBACjE,IAAI,UAAU;wBACZ,gBAAgB;wBAChB,cAAc,SAAS,EAAE;oBAC3B,OAAO;wBACL,2BAA2B;wBAC3B;oBACF;gBACF;YACF,OAAO,IAAI,KAAK,KAAK,KAAK,YAAY;gBACpC,mCAAmC;gBACnC;YACF;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,8BAA8B;QAC9C;IACF;IAEA,MAAM,iBAAiB;QACrB,IAAI,CAAC,MAAM,OAAO;QAElB,IAAI;YACF,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,8HAAQ,CACnC,IAAI,CAAC,cACL,MAAM,CAAC;gBAAC;oBACP,YAAY,KAAK,KAAK;oBACtB,WAAW,KAAK,aAAa,EAAE,QAAQ,KAAK,KAAK;oBACjD,iBAAiB,KAAK,aAAa,EAAE;gBACvC;aAAE,EACD,MAAM;YAET,IAAI,OAAO,MAAM;YACjB,IAAI,QAAQ,IAAI,CAAC,EAAE,EAAE;gBACnB,gBAAgB,IAAI,CAAC,EAAE;gBACvB,aAAa,CAAA,OAAQ;wBAAC,IAAI,CAAC,EAAE;2BAAK;qBAAK;YACzC;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,6BAA6B;QAC7C;IACF;IAEA,MAAM,gBAAgB,OAAO;QAC3B,IAAI;YACF,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,8HAAQ,CACnC,IAAI,CAAC,iBACL,MAAM,CAAC,KACP,EAAE,CAAC,WAAW,QACd,KAAK,CAAC,cAAc;gBAAE,WAAW;YAAK;YAEzC,IAAI,OAAO,MAAM;YACjB,YAAY,QAAQ,EAAE;QACxB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,4BAA4B;QAC5C;IACF;IAEA,MAAM,6BAA6B;QACjC,0BAA0B;QAC1B,MAAM,oBAAoB,8HAAQ,CAC/B,OAAO,CAAC,sBACR,EAAE,CAAC,oBACF;YAAE,OAAO;YAAK,QAAQ;YAAU,OAAO;QAAa,GACpD,CAAC;YACC,IAAI,QAAQ,SAAS,KAAK,UAAU;gBAClC,aAAa,CAAA,OAAQ;wBAAC,QAAQ,GAAG;2BAAiB;qBAAK;YACzD,OAAO,IAAI,QAAQ,SAAS,KAAK,UAAU;gBACzC,aAAa,CAAA,OAAQ,KAAK,GAAG,CAAC,CAAA,OAC5B,KAAK,EAAE,KAAK,QAAQ,GAAG,CAAC,EAAE,GAAG,QAAQ,GAAG,GAAe;YAE3D;QACF,GAED,SAAS;QAEZ,wBAAwB;QACxB,MAAM,uBAAuB,8HAAQ,CAClC,OAAO,CAAC,yBACR,EAAE,CAAC,oBACF;YAAE,OAAO;YAAU,QAAQ;YAAU,OAAO;QAAgB,GAC5D,CAAC;YACC,MAAM,aAAa,QAAQ,GAAG;YAC9B,IAAI,gBAAgB,WAAW,OAAO,KAAK,aAAa,EAAE,EAAE;gBAC1D,YAAY,CAAA,OAAQ;2BAAI;wBAAM;qBAAW;YAC3C;QACF,GAED,SAAS;QAEZ,OAAO;YACL,kBAAkB,WAAW;YAC7B,qBAAqB,WAAW;QAClC;IACF;IAEA,MAAM,cAAc,OAAO;QACzB,EAAE,cAAc;QAChB,IAAI,CAAC,WAAW,IAAI,MAAM,CAAC,gBAAgB,CAAC,MAAM,OAAO;QAEzD,MAAM,cAAc;YAClB,SAAS,aAAa,EAAE;YACxB,cAAc,KAAK,KAAK;YACxB,aAAa,KAAK,aAAa,EAAE,QAAQ,KAAK,KAAK;YACnD,SAAS,WAAW,IAAI;YACxB,UAAU,KAAK,KAAK,KAAK;QAC3B;QAEA,IAAI;YACF,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,8HAAQ,CAC7B,IAAI,CAAC,iBACL,MAAM,CAAC;gBAAC;aAAY;YAEvB,IAAI,OAAO,MAAM;YAEjB,kCAAkC;YAClC,MAAM,8HAAQ,CACX,IAAI,CAAC,cACL,MAAM,CAAC;gBAAE,iBAAiB,IAAI,OAAO,WAAW;YAAG,GACnD,EAAE,CAAC,MAAM,aAAa,EAAE;YAE3B,cAAc;QAChB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,0BAA0B;QAC1C;IACF;IAEA,MAAM,iBAAiB;QACrB,eAAe,OAAO,EAAE,eAAe;YAAE,UAAU;QAAS;IAC9D;IAEA,MAAM,aAAa,CAAC;QAClB,gBAAgB;QAChB,cAAc,KAAK,EAAE;IACvB;IAEA,IAAI,WAAW;QACb,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAI,WAAU;;;;;;;;;;;IAGrB;IAEA,IAAI,CAAC,MAAM;QACT,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC,4OAAa;gCAAC,MAAM;gCAAI,WAAU;;;;;;0CACnC,6LAAC;gCAAG,WAAU;0CAA2B;;;;;;0CACzC,6LAAC;gCAAE,WAAU;0CAA6B;;;;;;;;;;;;kCAG5C,6LAAC;wBACC,SAAS;wBACT,UAAU;wBACV,WAAU;;4BAET,4BACC,6LAAC;gCAAI,WAAU;;;;;qDAEf,6LAAC;gCAAI,WAAU;gCAAU,SAAQ;gCAAY,MAAK;;kDAChD,6LAAC;wCAAK,GAAE;wCAA0H,MAAK;;;;;;kDACvI,6LAAC;wCAAK,GAAE;wCAAwI,MAAK;;;;;;kDACrJ,6LAAC;wCAAK,GAAE;wCAAgI,MAAK;;;;;;kDAC7I,6LAAC;wCAAK,GAAE;wCAAsI,MAAK;;;;;;;;;;;;4BAErJ;;;;;;;kCAIJ,6LAAC;wBACC,SAAS,IAAM,OAAO,QAAQ,CAAC,IAAI,GAAG;wBACtC,WAAU;kCACX;;;;;;;;;;;;;;;;;IAMT;IAEA,MAAM,UAAU,MAAM,UAAU;IAEhC,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;gBAEd,yBACC,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAI,WAAU;sCACb,cAAA,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAG,WAAU;kDAAgC;;;;;;kDAC9C,6LAAC;wCACC,SAAS;wCACT,WAAU;wCACV,OAAM;kDAEN,cAAA,6LAAC,uNAAM;4CAAC,MAAM;;;;;;;;;;;;;;;;;;;;;;sCAIpB,6LAAC;4BAAI,WAAU;sCACZ,UAAU,MAAM,KAAK,kBACpB,6LAAC;gCAAI,WAAU;;kDACb,6LAAC,gNAAK;wCAAC,MAAM;wCAAI,WAAU;;;;;;kDAC3B,6LAAC;kDAAE;;;;;;;;;;;qDAGL,6LAAC;gCAAI,WAAU;0CACZ,UAAU,GAAG,CAAC,CAAC,qBACd,6LAAC;wCAEC,SAAS,IAAM,WAAW;wCAC1B,WAAW,CAAC,oDAAoD,EAC9D,cAAc,OAAO,KAAK,EAAE,GAAG,aAAa,IAC5C;kDAEF,cAAA,6LAAC;4CAAI,WAAU;;8DACb,6LAAC;oDAAI,WAAU;8DACb,cAAA,6LAAC,6MAAI;wDAAC,MAAM;wDAAI,WAAU;;;;;;;;;;;8DAE5B,6LAAC;oDAAI,WAAU;;sEACb,6LAAC;4DAAG,WAAU;sEAAwC,KAAK,SAAS;;;;;;sEACpE,6LAAC;4DAAE,WAAU;sEAA0C,KAAK,UAAU;;;;;;;;;;;;;;;;;;uCAZrE,KAAK,EAAE;;;;;;;;;;;;;;;;;;;;;8BAwB1B,6LAAC;oBAAI,WAAU;8BACZ,6BACC;;0CAEE,6LAAC;gCAAI,WAAU;0CACb,cAAA,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAI,WAAU;;8DACb,6LAAC;oDAAI,WAAU;8DACb,cAAA,6LAAC,6MAAI;wDAAC,MAAM;wDAAI,WAAU;;;;;;;;;;;8DAE5B,6LAAC;;sEACC,6LAAC;4DAAG,WAAU;sEACX,UAAU,aAAa,SAAS,GAAG;;;;;;sEAEtC,6LAAC;4DAAE,WAAU;sEACV,UAAU,aAAa,UAAU,GAAG;;;;;;;;;;;;;;;;;;wCAI1C,CAAC,yBACA,6LAAC;4CACC,SAAS;4CACT,WAAU;4CACV,OAAM;sDAEN,cAAA,6LAAC,uNAAM;gDAAC,MAAM;;;;;;;;;;;;;;;;;;;;;;0CAOtB,6LAAC;gCAAI,WAAU;;oCACZ,SAAS,MAAM,KAAK,kBACnB,6LAAC;wCAAI,WAAU;;0DACb,6LAAC,4OAAa;gDAAC,MAAM;gDAAI,WAAU;;;;;;0DACnC,6LAAC;0DAAE;;;;;;;;;;;+CAGL,SAAS,GAAG,CAAC,CAAC,wBACZ,6LAAC;4CAEC,WAAW,CAAC,KAAK,EAAE,QAAQ,QAAQ,KAAK,UAAU,gBAAgB,iBAAiB;sDAEnF,cAAA,6LAAC;gDACC,WAAW,CAAC,0CAA0C,EACpD,QAAQ,QAAQ,KAAK,UACjB,uCACA,4BACJ;;kEAEF,6LAAC;wDAAE,WAAU;kEAAW,QAAQ,OAAO;;;;;;kEACvC,6LAAC;wDAAE,WAAW,CAAC,aAAa,EAC1B,QAAQ,QAAQ,KAAK,UAAU,+BAA+B,yBAC9D;kEACC,IAAI,KAAK,QAAQ,UAAU,EAAE,kBAAkB;;;;;;;;;;;;2CAd/C,QAAQ,EAAE;;;;;kDAoBrB,6LAAC;wCAAI,KAAK;;;;;;;;;;;;0CAIZ,6LAAC;gCAAI,WAAU;0CACb,cAAA,6LAAC;oCAAK,UAAU;oCAAa,WAAU;;sDACrC,6LAAC;4CACC,MAAK;4CACL,OAAO;4CACP,UAAU,CAAC,IAAM,cAAc,EAAE,MAAM,CAAC,KAAK;4CAC7C,aAAY;4CACZ,WAAU;;;;;;sDAEZ,6LAAC;4CACC,MAAK;4CACL,UAAU,CAAC,WAAW,IAAI;4CAC1B,WAAU;sDAEV,cAAA,6LAAC,6MAAI;gDAAC,MAAM;;;;;;;;;;;;;;;;;;;;;;;qDAMpB,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BAAI,WAAU;;8CACb,6LAAC,gNAAK;oCAAC,MAAM;oCAAI,WAAU;;;;;;8CAC3B,6LAAC;8CAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQjB;GA7ZwB;KAAA"}},
    {"offset": {"line": 804, "column": 0}, "map": {"version":3,"sources":["file:///Users/aman/Downloads/amandoodle/app/chat/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect } from 'react'\nimport { supabase } from '@/lib/supabase'\nimport { MessageCircle, ArrowLeft } from 'lucide-react'\nimport Link from 'next/link'\nimport ChatContainer from '@/components/chat-container'\n\nexport default function ChatPage() {\n  const [user, setUser] = useState<any>(null)\n  const [isLoading, setIsLoading] = useState(true)\n\n  useEffect(() => {\n    checkAuth()\n    \n    // Listen for auth changes\n    const { data: authListener } = supabase.auth.onAuthStateChange(\n      async (event, session) => {\n        if (session?.user) {\n          setUser(session.user)\n        } else {\n          setUser(null)\n        }\n      }\n    )\n\n    return () => {\n      authListener.subscription.unsubscribe()\n    }\n  }, [])\n\n  const checkAuth = async () => {\n    try {\n      const { data: { user } } = await supabase.auth.getUser()\n      setUser(user)\n    } catch (error) {\n      console.error('Error checking auth:', error)\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  return (\n    <main className=\"relative min-h-screen bg-background overflow-x-hidden\">\n      {/* 3D Grid Background - Same as main page */}\n      <div className=\"pointer-events-none fixed inset-0 overflow-hidden\">\n        <div\n          className=\"absolute inset-0\"\n          style={{\n            backgroundImage: `\n              linear-gradient(to right, var(--grid-color) 1px, transparent 1px),\n              linear-gradient(to bottom, var(--grid-color) 1px, transparent 1px)\n            `,\n            backgroundSize: \"60px 60px\",\n          }}\n        />\n        <div\n          className=\"absolute inset-0\"\n          style={{\n            background: `\n              radial-gradient(ellipse at 50% 0%, transparent 0%, var(--background) 70%),\n              linear-gradient(to bottom, transparent 0%, var(--background) 100%)\n            `,\n          }}\n        />\n        <div\n          className=\"absolute bottom-0 left-0 right-0 h-[60vh]\"\n          style={{\n            background: \"linear-gradient(to top, var(--background) 0%, transparent 100%)\",\n            transform: \"perspective(500px) rotateX(60deg)\",\n            transformOrigin: \"bottom center\",\n          }}\n        >\n          <div\n            className=\"absolute inset-0\"\n            style={{\n              backgroundImage: `\n                linear-gradient(to right, var(--grid-color) 1px, transparent 1px),\n                linear-gradient(to bottom, var(--grid-color) 2px, transparent 2px)\n              `,\n              backgroundSize: \"80px 40px\",\n            }}\n          />\n        </div>\n        <div\n          className=\"absolute inset-0 opacity-30\"\n          style={{\n            backgroundImage: \"radial-gradient(var(--grid-color) 1px, transparent 1px)\",\n            backgroundSize: \"20px 20px\",\n          }}\n        />\n      </div>\n\n      {/* Content */}\n      <div className=\"relative z-10 mx-auto max-w-6xl px-6 py-16 md:py-24\">\n        {/* Header */}\n        <div className=\"mb-8\">\n          <Link \n            href=\"/\"\n            className=\"inline-flex items-center gap-2 text-muted-foreground hover:text-foreground transition-colors mb-6\"\n          >\n            <ArrowLeft size={16} />\n            Back to Home\n          </Link>\n          \n          <div className=\"mb-6 inline-block rounded border border-border bg-card/80 backdrop-blur-sm px-3 py-1 font-mono text-sm text-muted-foreground\">\n            ~/chat\n          </div>\n          <h1 className=\"mb-4 text-4xl font-bold tracking-tight text-foreground md:text-5xl\">\n            {user?.email === 'amanlabh4@gmail.com' ? 'Admin Chat' : 'Drop a Message'}\n          </h1>\n          <p className=\"mb-6 font-mono text-lg text-muted-foreground\">\n            {user?.email === 'amanlabh4@gmail.com' \n              ? 'Manage conversations with visitors'\n              : 'Start a real-time conversation with Aman'\n            }\n          </p>\n        </div>\n\n        {/* Chat Container */}\n        <div className=\"rounded-lg border border-border bg-card/80 backdrop-blur-sm p-6\">\n          <ChatContainer />\n        </div>\n\n        {/* Info Section */}\n        <div className=\"mt-8 grid gap-6 md:grid-cols-2\">\n          <div className=\"rounded-lg border border-border bg-card/80 backdrop-blur-sm p-6\">\n            <h3 className=\"font-semibold text-foreground mb-3 flex items-center gap-2\">\n              <MessageCircle size={20} />\n              Real-time Chat\n            </h3>\n            <p className=\"text-sm text-muted-foreground\">\n              Messages appear instantly without needing to refresh. Stay connected with real-time updates.\n            </p>\n          </div>\n          \n          <div className=\"rounded-lg border border-border bg-card/80 backdrop-blur-sm p-6\">\n            <h3 className=\"font-semibold text-foreground mb-3\">Secure Authentication</h3>\n            <p className=\"text-sm text-muted-foreground\">\n              Sign in with Google to start chatting. Your conversations are private and secure.\n            </p>\n          </div>\n        </div>\n      </div>\n    </main>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AACA;AACA;;;AANA;;;;;;AAQe,SAAS;;IACtB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAM;IACtC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAE3C,IAAA,0KAAS;8BAAC;YACR;YAEA,0BAA0B;YAC1B,MAAM,EAAE,MAAM,YAAY,EAAE,GAAG,8HAAQ,CAAC,IAAI,CAAC,iBAAiB;sCAC5D,OAAO,OAAO;oBACZ,IAAI,SAAS,MAAM;wBACjB,QAAQ,QAAQ,IAAI;oBACtB,OAAO;wBACL,QAAQ;oBACV;gBACF;;YAGF;sCAAO;oBACL,aAAa,YAAY,CAAC,WAAW;gBACvC;;QACF;6BAAG,EAAE;IAEL,MAAM,YAAY;QAChB,IAAI;YACF,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,8HAAQ,CAAC,IAAI,CAAC,OAAO;YACtD,QAAQ;QACV,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,wBAAwB;QACxC,SAAU;YACR,aAAa;QACf;IACF;IAEA,qBACE,6LAAC;QAAK,WAAU;;0BAEd,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBACC,WAAU;wBACV,OAAO;4BACL,iBAAiB,CAAC;;;YAGlB,CAAC;4BACD,gBAAgB;wBAClB;;;;;;kCAEF,6LAAC;wBACC,WAAU;wBACV,OAAO;4BACL,YAAY,CAAC;;;YAGb,CAAC;wBACH;;;;;;kCAEF,6LAAC;wBACC,WAAU;wBACV,OAAO;4BACL,YAAY;4BACZ,WAAW;4BACX,iBAAiB;wBACnB;kCAEA,cAAA,6LAAC;4BACC,WAAU;4BACV,OAAO;gCACL,iBAAiB,CAAC;;;cAGlB,CAAC;gCACD,gBAAgB;4BAClB;;;;;;;;;;;kCAGJ,6LAAC;wBACC,WAAU;wBACV,OAAO;4BACL,iBAAiB;4BACjB,gBAAgB;wBAClB;;;;;;;;;;;;0BAKJ,6LAAC;gBAAI,WAAU;;kCAEb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC,0KAAI;gCACH,MAAK;gCACL,WAAU;;kDAEV,6LAAC,gOAAS;wCAAC,MAAM;;;;;;oCAAM;;;;;;;0CAIzB,6LAAC;gCAAI,WAAU;0CAA+H;;;;;;0CAG9I,6LAAC;gCAAG,WAAU;0CACX,MAAM,UAAU,wBAAwB,eAAe;;;;;;0CAE1D,6LAAC;gCAAE,WAAU;0CACV,MAAM,UAAU,wBACb,uCACA;;;;;;;;;;;;kCAMR,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC,8IAAa;;;;;;;;;;kCAIhB,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAG,WAAU;;0DACZ,6LAAC,4OAAa;gDAAC,MAAM;;;;;;4CAAM;;;;;;;kDAG7B,6LAAC;wCAAE,WAAU;kDAAgC;;;;;;;;;;;;0CAK/C,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAG,WAAU;kDAAqC;;;;;;kDACnD,6LAAC;wCAAE,WAAU;kDAAgC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQzD;GA1IwB;KAAA"}}]
}